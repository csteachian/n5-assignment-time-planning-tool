<!doctype html>
<html lang="en" class="h-full">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>N5 Assignment Time Planner</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="/_sdk/element_sdk.js"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&amp;display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        box-sizing: border-box;
      }
      * {
        font-family: "DM Sans", sans-serif;
      }

      input[type="range"] {
        -webkit-appearance: none;
        appearance: none;
        height: 12px;
        border-radius: 6px;
        outline: none;
        cursor: pointer;
      }

      input[type="range"]::-webkit-slider-thumb {
        -webkit-appearance: none;
        appearance: none;
        width: 28px;
        height: 28px;
        border-radius: 50%;
        background: white;
        cursor: pointer;
        box-shadow:
          0 2px 8px rgba(0, 0, 0, 0.2),
          0 0 0 3px currentColor;
        transition: transform 0.15s ease;
      }

      input[type="range"]::-webkit-slider-thumb:hover {
        transform: scale(1.1);
      }

      input[type="range"]::-moz-range-thumb {
        width: 28px;
        height: 28px;
        border-radius: 50%;
        background: white;
        cursor: pointer;
        border: none;
        box-shadow:
          0 2px 8px rgba(0, 0, 0, 0.2),
          0 0 0 3px currentColor;
      }

      .task1-slider {
        background: linear-gradient(90deg, #6366f1 0%, #818cf8 100%);
        color: #6366f1;
      }

      .task2-slider {
        background: linear-gradient(90deg, #10b981 0%, #34d399 100%);
        color: #10b981;
      }

      .progress-ring {
        transform: rotate(-90deg);
      }

      @keyframes pulse {
        0%,
        100% {
          opacity: 1;
        }
        50% {
          opacity: 0.6;
        }
      }

      .warning {
        animation: pulse 1.5s ease-in-out infinite;
      }
    </style>
    <style>
      @view-transition {
        navigation: auto;
      }
    </style>
    <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
  </head>
  <body class="h-full bg-slate-900 text-white overflow-auto">
    <div class="min-h-full w-full p-6 md:p-8">
      <div class="max-w-3xl mx-auto">
        <!-- Header -->
        <div class="text-center mb-8">
          <div
            class="inline-flex items-center gap-2 bg-indigo-500/20 text-indigo-300 px-4 py-2 rounded-full text-sm font-medium mb-4"
          >
            <svg
              class="w-4 h-4"
              fill="none"
              stroke="currentColor"
              viewbox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"
              />
            </svg>
            6 Hours Total
          </div>
          <h1 id="main-title" class="text-3xl md:text-4xl font-bold mb-2">
            N5 Assignment Time Planner
          </h1>
          <p class="text-slate-400">
            Plan how to split your time between tasks
          </p>
        </div>
        <!-- Task Selection -->
        <div
          class="bg-slate-800/50 rounded-2xl p-5 mb-6 border border-slate-700"
        >
          <label class="text-sm font-medium text-slate-300 mb-3 block"
            >Choose your second task:</label
          >
          <div class="flex gap-3">
            <button
              id="btn-task2"
              class="flex-1 py-3 px-4 rounded-xl font-medium transition-all duration-200 bg-emerald-500 text-white shadow-lg shadow-emerald-500/25"
            >
              <span id="task2-btn-label">Task 2: Database</span>
            </button>
            <button
              id="btn-task3"
              class="flex-1 py-3 px-4 rounded-xl font-medium transition-all duration-200 bg-slate-700 text-slate-300 hover:bg-slate-600"
            >
              <span id="task3-btn-label">Task 3: Web</span>
            </button>
          </div>
        </div>
        <!-- Time Visualization -->
        <div class="grid md:grid-cols-2 gap-6 mb-6">
          <!-- Task 1 Card -->
          <div
            class="bg-gradient-to-br from-indigo-500/10 to-purple-500/10 rounded-2xl p-6 border border-indigo-500/20"
          >
            <div class="flex items-start justify-between mb-4">
              <div>
                <span
                  class="text-xs font-semibold text-indigo-400 uppercase tracking-wider"
                  >Task 1</span
                >
                <h3 id="task1-label" class="text-xl font-bold mt-1">
                  Software Design &amp; Development
                </h3>
              </div>
              <div
                class="bg-indigo-500/20 text-indigo-300 px-3 py-1 rounded-full text-sm font-medium"
              >
                25 marks • 63%
              </div>
            </div>
            <div class="mb-4">
              <div class="flex justify-between items-end mb-2">
                <span class="text-slate-400 text-sm">Time allocated</span>
                <span id="task1-time" class="text-3xl font-bold text-indigo-400"
                  >3h 47m</span
                >
              </div>
              <input
                type="range"
                id="task1-slider"
                class="w-full task1-slider"
                min="0"
                max="360"
                value="227"
              />
            </div>
            <div class="flex items-center gap-2 text-sm">
              <span class="text-slate-400">Recommended:</span>
              <span class="text-indigo-300 font-medium">3h 47m (63%)</span>
            </div>
          </div>
          <!-- Task 2/3 Card -->
          <div
            class="bg-gradient-to-br from-emerald-500/10 to-teal-500/10 rounded-2xl p-6 border border-emerald-500/20"
          >
            <div class="flex items-start justify-between mb-4">
              <div>
                <span
                  id="task-secondary-badge"
                  class="text-xs font-semibold text-emerald-400 uppercase tracking-wider"
                  >Task 2</span
                >
                <h3 id="task-secondary-label" class="text-xl font-bold mt-1">
                  Database Design &amp; Development
                </h3>
              </div>
              <div
                class="bg-emerald-500/20 text-emerald-300 px-3 py-1 rounded-full text-sm font-medium"
              >
                15 marks • 37%
              </div>
            </div>
            <div class="mb-4">
              <div class="flex justify-between items-end mb-2">
                <span class="text-slate-400 text-sm">Time allocated</span>
                <span
                  id="task2-time"
                  class="text-3xl font-bold text-emerald-400"
                  >2h 13m</span
                >
              </div>
              <input
                type="range"
                id="task2-slider"
                class="w-full task2-slider"
                min="0"
                max="360"
                value="133"
              />
            </div>
            <div class="flex items-center gap-2 text-sm">
              <span class="text-slate-400">Recommended:</span>
              <span class="text-emerald-300 font-medium">2h 13m (37%)</span>
            </div>
          </div>
        </div>
        <!-- Total Time Display -->
        <div
          id="total-display"
          class="bg-slate-800/50 rounded-2xl p-6 border border-slate-700 mb-6"
        >
          <div class="flex items-center justify-between">
            <div>
              <span class="text-slate-400 text-sm">Total time used</span>
              <div class="flex items-baseline gap-2 mt-1">
                <span id="total-time" class="text-4xl font-bold">6h 00m</span>
                <span class="text-slate-500">/ 6 hours</span>
              </div>
            </div>
            <div class="relative">
              <svg class="w-20 h-20 progress-ring" viewbox="0 0 100 100">
                <circle
                  cx="50"
                  cy="50"
                  r="42"
                  fill="none"
                  stroke="#334155"
                  stroke-width="8"
                />
                <circle
                  id="progress-circle"
                  cx="50"
                  cy="50"
                  r="42"
                  fill="none"
                  stroke="#22c55e"
                  stroke-width="8"
                  stroke-linecap="round"
                  stroke-dasharray="264"
                  stroke-dashoffset="0"
                /></svg
              ><span
                id="progress-percent"
                class="absolute inset-0 flex items-center justify-center text-lg font-bold"
                >100%</span
              >
            </div>
          </div>
          <div
            id="time-warning"
            class="hidden mt-4 p-3 bg-amber-500/20 border border-amber-500/30 rounded-xl"
          >
            <div class="flex items-center gap-2 text-amber-300">
              <svg
                class="w-5 h-5 warning"
                fill="none"
                stroke="currentColor"
                viewbox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"
                /></svg
              ><span id="warning-text" class="font-medium"
                >Time doesn't add up to 6 hours</span
              >
            </div>
          </div>
        </div>
        <!-- Tips Section -->
        <div class="bg-slate-800/30 rounded-2xl p-6 border border-slate-700/50">
          <h3 class="font-bold text-lg mb-4 flex items-center gap-2">
            <svg
              class="w-5 h-5 text-amber-400"
              fill="none"
              stroke="currentColor"
              viewbox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"
              />
            </svg>
            Planning Tips
          </h3>
          <ul class="space-y-3 text-slate-300">
            <li class="flex items-start gap-3">
              <span class="text-emerald-400 mt-1">✓</span>
              <span
                >The 63%/37% split is based on marks allocation – adjust if you
                find one task easier</span
              >
            </li>
            <li class="flex items-start gap-3">
              <span class="text-emerald-400 mt-1">✓</span>
              <span
                >Leave time for testing and fixing errors in both tasks</span
              >
            </li>
            <li class="flex items-start gap-3">
              <span class="text-emerald-400 mt-1">✓</span>
              <span
                >Don't spend too long on design – implementation carries most
                marks</span
              >
            </li>
            <li class="flex items-start gap-3">
              <span class="text-emerald-400 mt-1">✓</span>
              <span>Take short breaks to stay focused during the 6 hours</span>
            </li>
          </ul>
        </div>
        <!-- Footer -->
        <div class="text-center mt-8 text-slate-500 text-sm">
          Drag the sliders to plan your time • Both tasks must be completed
        </div>
      </div>
    </div>
    <script>
      const defaultConfig = {
        main_title: "N5 Assignment Time Planner",
        task1_name: "Software Design & Development",
        task2_name: "Database Design & Development",
        task3_name: "Web Design & Development",
        background_color: "#0f172a",
        surface_color: "#1e293b",
        text_color: "#ffffff",
        primary_action_color: "#6366f1",
        secondary_action_color: "#10b981",
      };

      let selectedTask = "task2";
      const TOTAL_MINUTES = 360;
      const RECOMMENDED_TASK1 = 227;
      const RECOMMENDED_TASK2 = 133;

      const task1Slider = document.getElementById("task1-slider");
      const task2Slider = document.getElementById("task2-slider");
      const btnTask2 = document.getElementById("btn-task2");
      const btnTask3 = document.getElementById("btn-task3");

      function formatTime(minutes) {
        const hours = Math.floor(minutes / 60);
        const mins = minutes % 60;
        if (hours === 0) return `${mins}m`;
        if (mins === 0) return `${hours}h`;
        return `${hours}h ${mins.toString().padStart(2, "0")}m`;
      }

      function updateDisplay() {
        const task1Minutes = parseInt(task1Slider.value);
        const task2Minutes = parseInt(task2Slider.value);
        const totalMinutes = task1Minutes + task2Minutes;
        const percentage = Math.round((totalMinutes / TOTAL_MINUTES) * 100);

        document.getElementById("task1-time").textContent =
          formatTime(task1Minutes);
        document.getElementById("task2-time").textContent =
          formatTime(task2Minutes);
        document.getElementById("total-time").textContent =
          formatTime(totalMinutes);
        document.getElementById("progress-percent").textContent =
          `${percentage}%`;

        const circumference = 264;
        const offset = circumference - (percentage / 100) * circumference;
        const progressCircle = document.getElementById("progress-circle");
        progressCircle.style.strokeDashoffset = Math.max(0, offset);

        const warning = document.getElementById("time-warning");
        const totalDisplay = document.getElementById("total-display");

        if (totalMinutes > TOTAL_MINUTES) {
          warning.classList.remove("hidden");
          document.getElementById("warning-text").textContent =
            `You're ${formatTime(totalMinutes - TOTAL_MINUTES)} over the 6-hour limit!`;
          progressCircle.style.stroke = "#ef4444";
          totalDisplay.classList.add("border-red-500/50");
          totalDisplay.classList.remove(
            "border-slate-700",
            "border-emerald-500/50",
          );
        } else if (totalMinutes < TOTAL_MINUTES) {
          warning.classList.remove("hidden");
          document.getElementById("warning-text").textContent =
            `You have ${formatTime(TOTAL_MINUTES - totalMinutes)} unallocated`;
          progressCircle.style.stroke = "#f59e0b";
          totalDisplay.classList.remove(
            "border-slate-700",
            "border-emerald-500/50",
            "border-red-500/50",
          );
        } else {
          warning.classList.add("hidden");
          progressCircle.style.stroke = "#22c55e";
          totalDisplay.classList.add("border-emerald-500/50");
          totalDisplay.classList.remove(
            "border-slate-700",
            "border-red-500/50",
          );
        }
      }

      function selectTask(task) {
        selectedTask = task;
        const config = window.elementSdk?.config || defaultConfig;

        if (task === "task2") {
          btnTask2.className =
            "flex-1 py-3 px-4 rounded-xl font-medium transition-all duration-200 bg-emerald-500 text-white shadow-lg shadow-emerald-500/25";
          btnTask3.className =
            "flex-1 py-3 px-4 rounded-xl font-medium transition-all duration-200 bg-slate-700 text-slate-300 hover:bg-slate-600";
          document.getElementById("task-secondary-badge").textContent =
            "Task 2";
          document.getElementById("task-secondary-label").textContent =
            config.task2_name || defaultConfig.task2_name;
        } else {
          btnTask3.className =
            "flex-1 py-3 px-4 rounded-xl font-medium transition-all duration-200 bg-emerald-500 text-white shadow-lg shadow-emerald-500/25";
          btnTask2.className =
            "flex-1 py-3 px-4 rounded-xl font-medium transition-all duration-200 bg-slate-700 text-slate-300 hover:bg-slate-600";
          document.getElementById("task-secondary-badge").textContent =
            "Task 3";
          document.getElementById("task-secondary-label").textContent =
            config.task3_name || defaultConfig.task3_name;
        }
      }

      function resetToRecommended() {
        task1Slider.value = RECOMMENDED_TASK1;
        task2Slider.value = RECOMMENDED_TASK2;
        updateDisplay();
      }

      task1Slider.addEventListener("input", updateDisplay);
      task2Slider.addEventListener("input", updateDisplay);
      btnTask2.addEventListener("click", () => selectTask("task2"));
      btnTask3.addEventListener("click", () => selectTask("task3"));

      async function onConfigChange(config) {
        document.getElementById("main-title").textContent =
          config.main_title || defaultConfig.main_title;
        document.getElementById("task1-label").textContent =
          config.task1_name || defaultConfig.task1_name;
        document.getElementById("task2-btn-label").textContent =
          `Task 2: ${(config.task2_name || defaultConfig.task2_name).split(" ")[0]}`;
        document.getElementById("task3-btn-label").textContent =
          `Task 3: ${(config.task3_name || defaultConfig.task3_name).split(" ")[0]}`;

        if (selectedTask === "task2") {
          document.getElementById("task-secondary-label").textContent =
            config.task2_name || defaultConfig.task2_name;
        } else {
          document.getElementById("task-secondary-label").textContent =
            config.task3_name || defaultConfig.task3_name;
        }

        document.body.style.backgroundColor =
          config.background_color || defaultConfig.background_color;
      }

      function mapToCapabilities(config) {
        return {
          recolorables: [
            {
              get: () =>
                config.background_color || defaultConfig.background_color,
              set: (value) => {
                config.background_color = value;
                window.elementSdk.setConfig({ background_color: value });
              },
            },
            {
              get: () => config.surface_color || defaultConfig.surface_color,
              set: (value) => {
                config.surface_color = value;
                window.elementSdk.setConfig({ surface_color: value });
              },
            },
            {
              get: () => config.text_color || defaultConfig.text_color,
              set: (value) => {
                config.text_color = value;
                window.elementSdk.setConfig({ text_color: value });
              },
            },
            {
              get: () =>
                config.primary_action_color ||
                defaultConfig.primary_action_color,
              set: (value) => {
                config.primary_action_color = value;
                window.elementSdk.setConfig({ primary_action_color: value });
              },
            },
            {
              get: () =>
                config.secondary_action_color ||
                defaultConfig.secondary_action_color,
              set: (value) => {
                config.secondary_action_color = value;
                window.elementSdk.setConfig({ secondary_action_color: value });
              },
            },
          ],
          borderables: [],
          fontEditable: undefined,
          fontSizeable: undefined,
        };
      }

      function mapToEditPanelValues(config) {
        return new Map([
          ["main_title", config.main_title || defaultConfig.main_title],
          ["task1_name", config.task1_name || defaultConfig.task1_name],
          ["task2_name", config.task2_name || defaultConfig.task2_name],
          ["task3_name", config.task3_name || defaultConfig.task3_name],
        ]);
      }

      if (window.elementSdk) {
        window.elementSdk.init({
          defaultConfig,
          onConfigChange,
          mapToCapabilities,
          mapToEditPanelValues,
        });
      }

      updateDisplay();
    </script>
    <script>
      (function () {
        function c() {
          var b = a.contentDocument || a.contentWindow.document;
          if (b) {
            var d = b.createElement("script");
            d.innerHTML =
              "window.__CF$cv$params={r:'9c744b9745e76539',t:'MTc2OTk3ODc1Ni4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";
            b.getElementsByTagName("head")[0].appendChild(d);
          }
        }
        if (document.body) {
          var a = document.createElement("iframe");
          a.height = 1;
          a.width = 1;
          a.style.position = "absolute";
          a.style.top = 0;
          a.style.left = 0;
          a.style.border = "none";
          a.style.visibility = "hidden";
          document.body.appendChild(a);
          if ("loading" !== document.readyState) c();
          else if (window.addEventListener)
            document.addEventListener("DOMContentLoaded", c);
          else {
            var e = document.onreadystatechange || function () {};
            document.onreadystatechange = function (b) {
              e(b);
              "loading" !== document.readyState &&
                ((document.onreadystatechange = e), c());
            };
          }
        }
      })();
    </script>
  </body>
</html>
